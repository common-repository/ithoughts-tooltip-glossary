{"version":3,"sources":["../src/ithoughts_tt_gl-styleeditor.js"],"names":["selfCalling","ithoughts","$","itg","iThoughtsTooltipGlossary","$themeName","$themeSelect","$d","ready","onDocumentReady","qtip","show","ajaxCallback","res","valid","hasOwnProperty","log","styleTag","length","parseHTML","append","innerHTML","css","updateStyle","theme_name","e","error","name","val","find","change","simple_ajax_callback","onThemeChange","parent","prop","value","iThoughts","v5"],"mappings":"AAAA;;;;;;;;;;;AAWA;;AAEA,CAAE,SAASA,WAAT,CAAsBC,SAAtB,EAAkC;AACnC,KAAIC,IAAID,UAAUC,CAAlB;AAAA,KACCC,MAAMC,wBADP;AAAA,KAECC,UAFD;AAAA,KAGCC,YAHD;;AAKAL,WAAUM,EAAV,CAAaC,KAAb,CAAoB,SAASC,eAAT,GAA2B;AAC9CH,iBAAeJ,EAAG,uBAAH,CAAf;AACAG,eAAaH,EAAG,qBAAH,CAAb;AACAA,IAAG,kCAAH,EAAwCQ,IAAxC,CAA8C,KAA9C,EAAsDC,IAAtD;AACA,MAAIC,eAAe,SAASA,YAAT,CAAuBC,GAAvB,EAA6B;AAC/C,OAAKA,IAAIC,KAAT,EAAiB;AAChB,QAAKD,IAAIE,cAAJ,CAAoB,KAApB,KAA+BF,IAAIE,cAAJ,CAAoB,YAApB,CAApC,EAAwE;AACvE;AACA,SAAI;AACHZ,UAAIa,GAAJ,CAAS,oCAAT,EAA+CH,GAA/C;AACA,UAAII,WAAWf,EAAG,+BAAH,CAAf;AACA,UAAK,MAAMe,SAASC,MAApB,EAA6B;AAC5BD,kBAAWf,EAAGA,EAAEiB,SAAF,CAAa,mDAAb,CAAH,CAAX;AACAjB,SAAG,MAAH,EAAYkB,MAAZ,CAAoBH,QAApB;AACA;AACDA,eAAS,CAAT,EAAYI,SAAZ,GAAwBR,IAAIS,GAA5B;;AAEAnB,UAAIoB,WAAJ,CAAiB,IAAjB,EAAuBV,IAAIW,UAA3B,EAAuCtB,EAAG,oBAAH,CAAvC;AACA,MAVD,CAUE,OAAQuB,CAAR,EAAY;AACbtB,UAAIuB,KAAJ,CAAW,qCAAX,EAAkDD,CAAlD;AACA;AACD,KAfD,MAeO;AACN;AACA,SAAIE,OAAOtB,WAAWuB,GAAX,EAAX;AACA,SAAK,MAAMtB,aAAauB,IAAb,oBAAqCF,IAArC,SAAiDT,MAA5D,EAAqE;AACpEZ,mBAAac,MAAb,qBAAwCO,IAAxC,UAAmDA,IAAnD;AACArB,mBAAasB,GAAb,CAAkBD,IAAlB,EAAyBG,MAAzB;AACA;AACD;AACD,IAxBD,MAwBO;AACN3B,QAAIuB,KAAJ,CAAW,mCAAX,EAAgDb,GAAhD;AACA;AACD,GA5BD;AA6BAX,IAAG,YAAH,EAAkB,CAAlB,EAAqB6B,oBAArB,GAA4CnB,YAA5C;AACAN,eAAawB,MAAb,CAAqB,SAASE,aAAT,GAAyB;AAC7C9B,KAAG,IAAH,EAAU+B,MAAV,GAAmBJ,IAAnB,CAAyB,QAAzB,EAAoCK,IAApC,CAA0C,UAA1C,EAAsD,CAAC,KAAKC,KAA5D;AACA,GAFD,EAEGL,MAFH;AAGA,EArCD;AAsCA,CA5CD,EA4CIM,UAAUC,EA5Cd","file":"ithoughts_tt_gl-styleeditor.js","sourcesContent":["/**\n * @file Client-side style-editor logic\n *\n * @author Gerkin\n * @copyright 2016 GerkinDevelopment\n * @license https://www.gnu.org/licenses/gpl-3.0.html GPLv3\n * @package ithoughts-tooltip-glossary\n *\n * @version 2.7.0\n */\n\n'use strict';\n\n( function selfCalling( ithoughts ) {\n\tvar $ = ithoughts.$,\n\t\titg = iThoughtsTooltipGlossary,\n\t\t$themeName,\n\t\t$themeSelect;\n\n\tithoughts.$d.ready( function onDocumentReady() {\n\t\t$themeSelect = $( '[name=\"theme_select\"]' );\n\t\t$themeName = $( '[name=\"theme_name\"]' );\n\t\t$( '[data-tooltip-id=\"exampleStyle\"]' ).qtip( 'api' ).show();\n\t\tvar ajaxCallback = function ajaxCallback( res ) {\n\t\t\tif ( res.valid ) {\n\t\t\t\tif ( res.hasOwnProperty( 'css' ) && res.hasOwnProperty( 'theme_name' )) {\n\t\t\t\t\t// This is a preview\n\t\t\t\t\ttry {\n\t\t\t\t\t\titg.log( 'Received CSS response from server:', res );\n\t\t\t\t\t\tvar styleTag = $( '#ithoughts_tt_gl-custom_theme' );\n\t\t\t\t\t\tif ( 0 === styleTag.length ) {\n\t\t\t\t\t\t\tstyleTag = $( $.parseHTML( '<style id=\"ithoughts_tt_gl-custom_theme\"></style>' ));\n\t\t\t\t\t\t\t$( 'body' ).append( styleTag );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyleTag[0].innerHTML = res.css;\n\n\t\t\t\t\t\titg.updateStyle( true, res.theme_name, $( '#qtip-exampleStyle' ));\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\titg.error( 'Error during setting preview style:', e );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// This is a save\n\t\t\t\t\tvar name = $themeName.val();\n\t\t\t\t\tif ( 0 === $themeSelect.find( `option[value=\"${ name }\"]` ).length ) {\n\t\t\t\t\t\t$themeSelect.append( `<option value=\"${ name }\">${ name }</option>` );\n\t\t\t\t\t\t$themeSelect.val( name ).change();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titg.error( 'Error while getting preview style', res );\n\t\t\t}\n\t\t};\n\t\t$( '#LESS-form' )[0].simple_ajax_callback = ajaxCallback;\n\t\t$themeSelect.change( function onThemeChange() {\n\t\t\t$( this ).parent().find( 'button' ).prop( 'disabled', !this.value );\n\t\t}).change();\n\t});\n})( iThoughts.v5 );\n"]}