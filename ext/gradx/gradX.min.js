"use strict";"undefined"==typeof jQuery.fn.draggable&&!function(e){e.fn.draggable=function(){var e=document.getElementById(this.attr("id"));return e.style.top="121px",Drag.init(e,null,26,426,86,86),this}}(jQuery);var gradX=function(e,r){function d(e,r,d){e.attachEvent?e.attachEvent("on"+r,function(){d.call(e)}):e.addEventListener&&e.addEventListener(r,d,!1)}var a={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,r){}};gradx={rand_RGB:[],rand_pos:[],id:null,slider_ids:[],slider_index:0,sliders:[],direction:"left",type:"linear",shape:"cover",slider_hovered:[],jQ_present:!0,code_shown:!1,load_jQ:function(){this.gx=jQuery},add_event:function(e,r,a){d(e,r,a)},get_random_position:function(){var e;do e=parseInt(100*Math.random());while(this.rand_pos.indexOf(e)>-1);return this.rand_pos.push(e),e},get_random_rgb:function(){var e,r,d,a;do e=parseInt(255*Math.random()),r=parseInt(255*Math.random()),d=parseInt(255*Math.random()),a="rgb("+e+", "+r+", "+d+")";while(this.rand_RGB.indexOf(a)>-1);return this.rand_RGB.push(a),a},update_target:function(e){if(this.targets.length>0){var r,d,a,t=this.targets.length,i=e.length;for(r=0;t>r;r++)for(a=gradx.gx(this.targets[r]),d=0;i>d;d++)a.css("background-image",e[d])}},apply_style:function(e,r){var d="linear";if("linear"!=gradx.type&&(d="radial"),r.indexOf(this.direction)>-1)var a=["-webkit-"+d+"-gradient("+r+")","-moz-"+d+"-gradient("+r+")","-ms-"+d+"-gradient("+r+")","-o-"+d+"-gradient("+r+")",d+"-gradient("+r+")"];else a=[r];for(var t=a.length,i="";t>0;)t--,e.css("background",a[t]),i+="background: "+a[t]+";\n";this.change(this.sliders,a),this.update_target(a),gradx.gx("#gradx_code").html(i)},apply_default_styles:function(){this.update_style_array();var e=this.get_style_value();this.apply_style(this.panel,e)},update_style_array:function(){this.sliders=[];var e,r,d,a,t=gradx.slider_ids.length;for(e=0;t>e;e++)a="#"+gradx.slider_ids[e],r=parseInt(gradx.gx(a).css("left")),d=parseInt(r/gradx.container_width*100),d-=6,gradx.sliders.push([gradx.gx(a).css("background-color"),d]);this.sliders.sort(function(e,r){return e[1]>r[1]?1:-1})},get_style_value:function(){var e=gradx.slider_ids.length;if(1===e)r=this.sliders[0][0];else{for(var r="",d="",a=0;e>a;a++)""==this.sliders[a][1]?r+=d+this.sliders[a][0]:(this.sliders[a][1]>100&&(this.sliders[a][1]=100),r+=d+(this.sliders[a][0]+" "+this.sliders[a][1]+"%")),d=" , ";r="linear"==this.type?this.direction+" , "+r:this.direction+" , "+this.type+" "+this.shape+" , "+r}return r},get_rgb_obj:function(e){return e=e.split("("),e=e[1],e=e.split(","),{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2])}},load_info:function(e){var r="#"+e.id;if(this.current_slider_id=r,this.slider_ids.indexOf(e.id)>-1){var d=gradx.gx(r).css("backgroundColor"),a=this.get_rgb_obj(d),t=gradx.gx(r).css("left");parseInt(t)>26&&parseInt(t)<426&&gradx.gx("#gradx_slider_info").css("left",t).show(),this.set_colorpicker(a),console.log(a)}},add_slider:function(e){var r,d,a,t,i;0===e.length&&(e=[{color:gradx.get_random_rgb(),position:gradx.get_random_position()},{color:gradx.get_random_rgb(),position:gradx.get_random_position()}]),obj=e;for(a in obj){if("undefined"==typeof obj[a].position)break;var i=26;t=parseInt(obj[a].position*this.container_width/100)+i+"px",r="gradx_slider_"+this.slider_index,this.sliders.push([obj[a].color,obj[a].position]),this.slider_ids.push(r),d="<div class='gradx_slider' id='"+r+"'></div>",gradx.gx("#gradx_start_sliders_"+this.id).append(d),gradx.gx("#"+r).css("backgroundColor",obj[a].color).css("left",t),this.slider_index++}for(var s=0,n=this.slider_ids.length;n>s;s++)gradx.gx("#"+this.slider_ids[s]).draggable({containment:"parent",axis:"x",start:function(){gradx.jQ_present&&(gradx.current_slider_id="#"+gradx.gx(this).attr("id"))},drag:function(){gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value());var e=gradx.gx(gradx.current_slider_id).css("left");parseInt(e)>26&&parseInt(e)<426&&gradx.gx("#gradx_slider_info").css("left",e).show();var r=gradx.gx(gradx.current_slider_id).css("backgroundColor"),d=gradx.get_rgb_obj(r);gradx.cp.spectrum("set",d)}}).click(function(){return gradx.load_info(this),!1})},set_colorpicker:function(e){gradx.cp.spectrum({move:function(e){if(0!=gradx.current_slider_id){var r=e.toRgbString();gradx.gx(gradx.current_slider_id).css("background-color",r),gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value())}},change:function(){gradx.gx("#gradx_slider_info").hide()},flat:!0,showAlpha:!0,color:e,clickoutFiresChange:!0,showInput:!0,showButtons:!1})},generate_options:function(e){for(var r,d,a=e.length,t="",i=0;a>i;i++)r=e[i].split(" "),r=r[0],d=2>i?r[1]:"",r=r.replace("-"," "),t+="<option value="+e[i]+" "+d+">"+r+"</option>";return t},generate_radial_options:function(){var e;e=["horizontal-center disabled","center selected","left","right"],gradx.gx("#gradx_gradient_subtype").html(gradx.generate_options(e)),e=["vertical-center disabled","center selected","top","bottom"],gradx.gx("#gradx_gradient_subtype2").html(gradx.generate_options(e)).show()},generate_linear_options:function(){var e;e=["horizontal-center disabled","left selected","right","top","bottom"],gradx.gx("#gradx_gradient_subtype").html(gradx.generate_options(e)),gradx.gx("#gradx_gradient_subtype2").hide()},destroy:function(){var e={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,r){}};for(var r in e)gradx[r]=e[r]},load_gradx:function(e,r){this.me=gradx.gx(e),this.id=e.replace("#",""),e=this.id,this.current_slider_id=!1;var d="<div class='gradx'>\n                        <div id='gradx_add_slider' class='gradx_add_slider gradx_btn'><i class='icon icon-add'></i>add</div>\n                        <div class='gradx_slectboxes'>\n                        <select id='gradx_gradient_type' class='gradx_gradient_type'>\n                            <option value='linear'>Linear</option>\n                            <option value='circle'>Radial - Circle</option>\n                            <option value='ellipse'>Radial - Ellipse</option>\n                        </select>\n                        <select id='gradx_gradient_subtype' class='gradx_gradient_type'>\n                            <option id='gradx_gradient_subtype_desc' value='gradient-direction' disabled>gradient direction</option>\n                            <option value='left' selected>Left</option>\n                            <option value='right'>Right</option>\n                            <option value='top'>Top</option>\n                            <option value='bottom'>Bottom</option>\n                        </select>\n                        <select id='gradx_gradient_subtype2' class='gradx_gradient_type gradx_hide'>\n                        </select>\n                        <select id='gradx_radial_gradient_size' class='gradx_gradient_type gradx_hide'>\n                        </select>\n                        </div>\n                        <div class='gradx_container' id='gradx_"+e+"'>\n                            <div id='gradx_stop_sliders_"+e+"'></div>\n                            <div class='gradx_panel' id='gradx_panel_"+e+"'></div>\n                            <div class='gradx_start_sliders' id='gradx_start_sliders_"+e+"'>\n                                <div class='cp-default' id='gradx_slider_info'>\n                                    <div id='gradx_slider_controls'>\n                                        <div id='gradx_delete_slider' class='gradx_btn'><i class='icon icon-remove'></i>delete</div>\n                                    </div>\n                                    <div id='gradx_slider_content'></div>\n                                </div> \n                            </div>\n                        </div>\n                        <div id='gradx_show_code' class='gradx_show_code gradx_btn'><i class='icon icon-file-css'></i><span>show the code</span></div>\n                        <div id='gradx_show_presets' style='display:none' class='gradx_show_presets gradx_btn'><i class='icon icon-preset'></i><span>show presets</span></div>\n                        <textarea class='gradx_code' id='gradx_code'></textarea>\n                    </div>";this.me.html(d);var a=["gradient-size disabled","closest-side selected","closest-corner","farthest-side","farthest-corner","contain","cover"],t="";if(t=gradx.generate_options(a),gradx.gx("#gradx_radial_gradient_size").html(t),this.container=gradx.gx("#gradx_"+e),this.panel=gradx.gx("#gradx_panel_"+e),this.container_width=400,this.add_slider(r),gradx.add_event(document,"click",function(){return gradx.slider_hovered[e]?void 0:(gradx.gx("#gradx_slider_info").hide(),!1)}),gradx.gx("#gradx_add_slider").click(function(){gradx.add_slider([{color:gradx.get_random_rgb(),position:gradx.get_random_position()}]),gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.cp=gradx.gx("#gradx_slider_content"),gradx.set_colorpicker("blue"),gradx.gx("#gradx_delete_slider").click(function(){gradx.gx(gradx.current_slider_id).remove(),gradx.gx("#gradx_slider_info").hide();for(var e=gradx.current_slider_id.replace("#",""),r=0;r<gradx.slider_ids.length;r++)gradx.slider_ids[r]==e&&gradx.slider_ids.splice(r,1);gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value()),gradx.current_slider_id=!1}),gradx.gx("#gradx_code").focus(function(){var e=gradx.gx(this);e.select(),e.mouseup(function(){return e.unbind("mouseup"),!1})}),gradx.gx("#gradx_gradient_type").change(function(){var e=gradx.gx(this).val();"linear"!==e?gradx.generate_radial_options():(gradx.generate_linear_options(),gradx.gx("#gradx_gradient_subtype").val("left")),gradx.type=e,gradx.direction=gradx.gx("#gradx_gradient_subtype").val(),gradx.apply_style(gradx.panel,gradx.get_style_value())}),"linear"!==this.type){gradx.gx("#gradx_gradient_type").val(this.type),gradx.generate_radial_options();var i,s;if("left"!==this.direction){var n;n=this.direction.indexOf(",")>-1?this.direction.split(","):this.direction.split(" "),i=n[0],s=n[1],gradx.gx("#gradx_gradient_subtype").val(i),gradx.gx("#gradx_gradient_subtype2").val(s)}else var i=gradx.gx("#gradx_gradient_subtype").val(),s=gradx.gx("#gradx_gradient_subtype2").val();gradx.direction=i+" "+s,gradx.apply_style(gradx.panel,gradx.get_style_value())}else"left"!==this.direction&&gradx.gx("#gradx_gradient_subtype").val(this.direction);gradx.gx("#gradx_gradient_subtype").change(function(){if("linear"===gradx.type)gradx.direction=gradx.gx(this).val();else{var e=gradx.gx(this).val(),r=gradx.gx("#gradx_gradient_subtype2").val();gradx.direction=e+" "+r}gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.gx("#gradx_gradient_subtype2").change(function(){var e=gradx.gx("#gradx_gradient_subtype").val(),r=gradx.gx(this).val();gradx.direction=e+" "+r,gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.gx("#gradx_radial_gradient_size").change(function(){gradx.shape=gradx.gx(this).val(),gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.gx("#gradx_show_code").click(function(){gradx.code_shown?(gradx.code_shown=!1,gradx.gx("#gradx_show_code span").text("show the code"),gradx.gx("#gradx_code").hide()):(gradx.gx("#gradx_show_code span").text("hide the code"),gradx.gx("#gradx_code").show(),gradx.code_shown=!0)}),gradx.code_shown&&(gradx.gx("#gradx_show_code span").text("hide the code"),gradx.gx("#gradx_code").show()),gradx.add_event(document.getElementById("gradx_slider_info"),"mouseout",function(){gradx.slider_hovered[e]=!1}),gradx.add_event(document.getElementById("gradx_slider_info"),"mouseover",function(){gradx.slider_hovered[e]=!0})}},gradx.load_jQ(),gradx.gx.extend(a,r);for(var t in a)gradx[t]=a[t];gradx.load_gradx(e,gradx.sliders),gradx.apply_default_styles()};