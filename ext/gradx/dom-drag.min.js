/**************************************************
 * dom-drag.js
 * 09.25.2001
 * www.youngpup.net
 **************************************************
 * 10.28.2001 - fixed minor bug where events
 * sometimes fired off the handle, not the root.
 **************************************************/
var Drag={obj:null,init:function(o,e,t,n,a,r,l,m,s,u){o.onmousedown=Drag.start,o.hmode=!l,o.vmode=!m,o.root=e&&null!=e?e:o,o.hmode&&isNaN(parseInt(o.root.style.left))&&(o.root.style.left="0px"),!o.hmode&&isNaN(parseInt(o.root.style.right))&&(o.root.style.right="0px"),o.minX="undefined"!=typeof t?t:null,o.minY="undefined"!=typeof a?a:null,o.maxX="undefined"!=typeof n?n:null,o.maxY="undefined"!=typeof r?r:null,o.xMapper=s?s:null,o.yMapper=u?u:null,o.root.onDragStart=new Function,o.root.onDragEnd=new Function,o.root.onDrag=new Function},start:function(o){gradx.current_slider_id="#"+this.id;var e=Drag.obj=this;o=Drag.fixE(o);var t=parseInt(e.vmode?e.root.style.top:e.root.style.bottom),n=parseInt(e.hmode?e.root.style.left:e.root.style.right);return e.root.onDragStart(n,t),e.lastMouseX=o.clientX,e.lastMouseY=o.clientY,e.hmode?(null!=e.minX&&(e.minMouseX=o.clientX-n+e.minX),null!=e.maxX&&(e.maxMouseX=e.minMouseX+e.maxX-e.minX)):(null!=e.minX&&(e.maxMouseX=-e.minX+o.clientX+n),null!=e.maxX&&(e.minMouseX=-e.maxX+o.clientX+n)),e.vmode?(null!=e.minY&&(e.minMouseY=o.clientY-t+e.minY),null!=e.maxY&&(e.maxMouseY=e.minMouseY+e.maxY-e.minY)):(null!=e.minY&&(e.maxMouseY=-e.minY+o.clientY+t),null!=e.maxY&&(e.minMouseY=-e.maxY+o.clientY+t)),document.onmousemove=Drag.drag,document.onmouseup=Drag.end,!1},drag:function(o){o=Drag.fixE(o);var e=Drag.obj;gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value());var t=gradx.gx("#"+e.id).css("left");parseInt(t)>60&&parseInt(t)<390&&gradx.gx("#gradx_slider_info").css("left",t).show();var n=gradx.gx("#"+e.id).css("backgroundColor"),a=gradx.get_rgb_obj(n);gradx.cp.spectrum("set",a);var r,l,m=o.clientY,s=o.clientX,u=parseInt(e.vmode?e.root.style.top:e.root.style.bottom),i=parseInt(e.hmode?e.root.style.left:e.root.style.right);return null!=e.minX&&(s=e.hmode?Math.max(s,e.minMouseX):Math.min(s,e.maxMouseX)),null!=e.maxX&&(s=e.hmode?Math.min(s,e.maxMouseX):Math.max(s,e.minMouseX)),null!=e.minY&&(m=e.vmode?Math.max(m,e.minMouseY):Math.min(m,e.maxMouseY)),null!=e.maxY&&(m=e.vmode?Math.min(m,e.maxMouseY):Math.max(m,e.minMouseY)),r=i+(s-e.lastMouseX)*(e.hmode?1:-1),l=u+(m-e.lastMouseY)*(e.vmode?1:-1),e.xMapper?r=e.xMapper(u):e.yMapper&&(l=e.yMapper(i)),Drag.obj.root.style[e.hmode?"left":"right"]=r+"px",Drag.obj.lastMouseX=s,Drag.obj.lastMouseY=m,Drag.obj.root.onDrag(r,l),!1},end:function(){document.onmousemove=null,document.onmouseup=null,Drag.obj.root.onDragEnd(parseInt(Drag.obj.root.style[Drag.obj.hmode?"left":"right"]),parseInt(Drag.obj.root.style[Drag.obj.vmode?"top":"bottom"])),Drag.obj=null},fixE:function(o){return"undefined"==typeof o&&(o=window.event),"undefined"==typeof o.layerX&&(o.layerX=o.offsetX),"undefined"==typeof o.layerY&&(o.layerY=o.offsetY),o}};